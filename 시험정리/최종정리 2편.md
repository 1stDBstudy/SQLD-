## SQLD 최종 정리 2편

- 김강민 SQLD 강사 최종 정리강의 영상 내용 정리
- 이것만 보면 무조건 60점 이상은 넘는대요.
- 링크
    - 1편: [https://youtu.be/PC3ypt_VGWI](https://youtu.be/PC3ypt_VGWI)
    - 2편: [https://youtu.be/PjCSvexo3Ow](https://youtu.be/PjCSvexo3Ow)

### 🔷 윈도우 함수

1. rows, range
    - 결과값 상 차이점
        - 같은값 유무 파악
        - [https://hongsii.github.io/2017/12/12/window-function-range/](https://hongsii.github.io/2017/12/12/window-function-range/)
2. rank, dense_rank
    - rank: 중복 건너뛴다. (1, 1, 3, 4)
    - dense_rank: 건너뛰기x (1, 1, 2, 3)
3. partition by, order by
4. 윈도우 함수는 무조건 문제풀기식으로 공부

### 🔷 계층형 질의

1. 이론
    1. prior 자식데이터 = 부모데이터 (프자부)
    2. 부모에서 자식으로 가면 순방향 (부자순)
2. 실습
    
    ![image](https://user-images.githubusercontent.com/70236767/141673357-9ed5c7ad-a843-4baf-b42f-b689581232ee.png)
    
    - 34회 기출 어렵게 나온 문제 있다.

### 🔷 절차형 PL/SQL

1. exception ⇒ 생략 가능
2. procedure, trigger, user defined function 차이점
    - procedure: 반드시 값 안나온다.
    - trigger: 커밋, 롤백 안된다. DML 많이 쓴다.
    - user~ : 반드시 값 나온다.

### 🔷 데이터모델링

업무를 관계형 데이터베이스로 데이터 모델화

### 🔷 엔터티

1. 엔터티 도출 방법 (관리하고자하는 대상)
2. 특징
3. 분류
    1. 유형, 개념, 사건
    2. 기본, 중심, 행위

### 🔷 속성

1. 관리하고자 하는 대상인 인스턴스의 특성
2. 분류
    - 기본 속성, 설계 속성, 파생 속성 정의

### 🔷 도메인

1. 데이터 유형, 크기, 제약 조건
2. check, primary key, ...

### 🔷 관계

1. IE표기법과 Barker표기법 
    
    ![image](https://user-images.githubusercontent.com/70236767/141673366-c32bcc06-2e3f-495d-b6ba-2e254e86fd07.png)
    

### 🔷 식별자

1. 주식별자 특징
    - 유일성, 최소성, 불변성, 존재성
        - 다 만족하면 후보키
        - 선정되면 기본키, 나머지는 대체키

### 🔷 식별자 관계, 비식별자 관계

1. 식별, 비식별 특징 및 단점
    
    ![image](https://user-images.githubusercontent.com/70236767/141673370-a99e8faa-df53-41fe-9982-a77cf5be4989.png)
    
2. 기술 (IE vs Baker)
    
    ![image](https://user-images.githubusercontent.com/70236767/141673373-22ae1fed-d1fc-4be7-b0b7-91749c67a3d1.png)
    
3. ERD 서술 규칙
    1. 시선 좌상 → 우하
    2. 관계명 반드시 표기 안해도 된다.
    3. UML → 객체지향에서만 쓰인다.

### 🔷 성능 데이터 모델링

1. 모델링 종류
    1. 아키텍처
        - 테이블, 파티션
        - 정규화, 반정규화
    2. SQL 명령문
        - 조인 수행 원리
        - optimizer
        - 실행계획

### 🔷 ⭐ 정규화

1. 정규화 방법
    1. 1차: 원자성, 2차: 부분함수종속제거, 3차: 이행함수종속제거
2. 이상현상 정의와 예시
3. 성능
    - select는 성능 느려질수 있다. (join 때문에)
    - insert, update는 빨라질 수 있다. (테이블 작아져서)

### 🔷 반정규화

1. 데이터 무결성 해친다.
2. 반정규화 고려 순서
    1. 빈도수 조사 (대량범위, 범위처리, 통계처리)
    2. 응용시스템변경, 클러스터링/인덱스, 뷰 고려
    3. 위 방법으로 해결 안될 시 반정규화 고려
3. 반정규화 방법 및 기법
    1. 테이블 반정규화: 병합(1:1, 1:M, 슈퍼/서브), 분할(부분T, 통계T, 중복T)
    2. 속성 반정규화(파생, 오류, 이력컬럼, PK →속성, 중복속성)
    3. 관계 반정규화(중복관계추가)

### 🔷 대량 데이터에 따른 성능

1. row migration, row chaining
    - 정의 읽어만 보기
2. 파티셔닝 (list, range, hash) 특징
    - range: 관리 쉽다, 가장많이 쓰인다
    - hash: 관리가 어렵다

### 🔷 슈퍼/서브타입

   ![image](https://user-images.githubusercontent.com/70236767/141673448-0d2d9037-d0ca-4dcd-8cd4-93bba827c50f.png)


1. 용량
    1. 적은경우: one to one. 트랜잭션이 개별로
    2. 큰경우: 트랜잭션 유형으로
2. 트랜잭션
    1. 공통/차이. plus type
    2. 전체 통합. single type

### 🔷 분산데이터베이스

1. 투명성 개념
    - 요즘 잘 안나온다.
2. 데이터 무결성 해친다.

### 🔷 ⭐ 조인 수행 원리

1. 문제 많이 풀기
2. 종류
    1. NL: 랜덤엑세스, 대용량 소트 작업 유리
    2. sort merge: 조인키 기준 정렬, 등가 비등가
    3. hash: 등가 조인만 쓴다, 선행 table 작다, 해시 처리 위한 별도 공간 필요

### 🔷 옵티마이저

1. CBO, RBO 정의 정도만 공부하기
    1. CBO: 경로
    2. RBO: 규칙
2. 요즘 잘 안나온다.

### 🔷 인덱스

1. 인덱스 언제 사용
    1. 부정형, LIKE, 묵시적형변환일 때 안쓴다.
2. 인덱스 사용 시 다음 성능 저하
    1. insert, update, delete

### 🔷 실행계획

1. ⭐ 실행 순서 딱 하나만 보기
    
    ![image](https://user-images.githubusercontent.com/70236767/141673401-d00a97fb-a335-4a23-9e1d-66a3d3931fbe.png)
    

### 🔷 마지막으로

- 정규화 많이 보기
- pivot, unpivot 중 빈칸나오면 뭐 쓸지 정도 보기
- merge 한번 보기
