[메인으로 이동](../README.md)

# 📒 SQLD 최종 정리 2편

- 1편에 설명


## 목차 <a id="aid-index">

[📒 1편](./최종정리%201편.md)

### 📒 2편

1. [윈도우 함수](#aid-1)
1. [계층형 질의와 셀프 조인](#aid-2)
1. [절차형 PL/SQL](#aid-3)
1. [데이터모델링](#aid-4)
1. [엔터티](#aid-5)
1. [속성](#aid-6)
1. [도메인](#aid-7)
1. [관계, 표기법](#aid-8)
1. [식별자](#aid-9)
1. [식별자 관계, 비식별자 관계](#aid-10)
1. [성능 데이터 모델링](#aid-11)
1. [⭐ 정규화](#aid-12)
1. [반정규화](#aid-13)
1. [대량 데이터에 따른 성능](#aid-14)
1. [슈퍼/서브타입](#aid-15)
1. [분산데이터베이스](#aid-16)
1. [⭐ 조인 수행 원리](#aid-17)
1. [옵티마이저](#aid-18)
1. [인덱스](#aid-19)
1. [실행계획](#aid-20)
1. [pivot](#aid-21)

## 2편

### 🔷 윈도우 함수 <a id="aid-1">

[목차로 이동](#aid-index)

1. rows, range
    - 결과값 상 차이점
        - 같은값 유무 파악
        - [https://hongsii.github.io/2017/12/12/window-function-range/](https://hongsii.github.io/2017/12/12/window-function-range/)
2. rank, dense_rank
    - rank: 중복 건너뛴다. (1, 1, 3, 4)
    - dense_rank: 건너뛰기x (1, 1, 2, 3)
3. partition by, order by
4. 윈도우 함수는 무조건 문제풀기식으로 공부

### 🔷 계층형 질의와 셀프 조인 <a id="aid-2">

[목차로 이동](#aid-index)

1. 이론
    1. prior 자식데이터 = 부모데이터 (프자부)
    2. 부모에서 자식으로 가면 순방향 (부자순)
2. 실습
    
    ![image](https://user-images.githubusercontent.com/70236767/141673357-9ed5c7ad-a843-4baf-b42f-b689581232ee.png)
    
    - 34회 기출 어렵게 나온 문제 있다.

3. 셀프 조인 (SELF JOIN)
    - 한 테이블 내 두 칼럼이 연관관계가 있을 때 동일 테이블 사이의 조인
        - FROM 절에 동일 테이블이 2번 이상 나타난다.
    - 반드시 테이블 별칭을 사용해야 한다.
        - `FROM EMP E1, EMP E2` 처럼

### 🔷 절차형 PL/SQL <a id="aid-3">

[목차로 이동](#aid-index)

1. exception ⇒ 생략 가능
2. procedure, trigger, user defined function 차이점
    - procedure: 반드시 값 안나온다.
    - trigger: 커밋, 롤백 안된다. DML 많이 쓴다.
    - user~ : 반드시 값 나온다.

### 🔷 데이터모델링 <a id="aid-4">

[목차로 이동](#aid-index)

업무를 관계형 데이터베이스로 데이터 모델화

### 🔷 엔터티 <a id="aid-5">

[목차로 이동](#aid-index)

1. 엔터티 도출 방법 (관리하고자하는 대상)
2. 특징
3. 분류
    1. 유형, 개념, 사건
    2. 기본, 중심, 행위

### 🔷 속성 <a id="aid-6">

[목차로 이동](#aid-index)

1. 관리하고자 하는 대상인 인스턴스의 특성
1. 분류
    - 기본 속성, 설계 속성, 파생 속성 정의와 예시
        - 기본 속성: 업무로부터 추출한 모든 일반적인 속성
            - ex) 제품이름, 제조년월, 제조원가
        - 설계 속성: 업무를 규칙화하기 위해 새로 만들거나 변형, 정의하는 속성
            - ex) 일련번호, 약품용기코드
        - 파생 속성: 다른 속성에 영향을 받아 발생하는 속성. 빠른 성능을 낼 수 있도록 원래 속성의 값을 계산. 적을수록 좋다.
            - ex) 합, 계산값

1. 기출
    - 기출 42회
        1. 파생 속성 찾기 (정답: 총금액)

### 🔷 도메인 <a id="aid-7">

[목차로 이동](#aid-index)

1. 데이터 유형, 크기, 제약 조건
2. check, primary key, ...

### 🔷 관계, 표기법 <a id="aid-8">

[목차로 이동](#aid-index)

1. IE표기법과 Barker표기법 
    
    ![image](https://user-images.githubusercontent.com/70236767/141673366-c32bcc06-2e3f-495d-b6ba-2e254e86fd07.png)

    - 참고
        - IE 표기법
            - https://itpenote.tistory.com/598?category=898785
        - Barker 표기법
            - https://itpenote.tistory.com/597
    
    

### 🔷 식별자 <a id="aid-9">

[목차로 이동](#aid-index)

1. 식별자 개념
    - 엔터티 내에서 인스턴스를 구분하는 구분자
    - 식별자는 논리적 데이터 모델링 단계에서 사용
        - Key는 물리적 데이터 모델링 단계에서 사용

1. 식별자 특징
    - 4가지: 유일성, 최소성, 불변성, 존재성
    - 유일성: 주식별자에 의해 모든 인스턴스들이 유일하게 구분
    - 최소성: 주식별자를 구성하는 속성의 수는 유일성을 만족하는 최소의 수가 되어야 함.
    - 불변성: 지정된 주식별자의 값은 자주 변하지 않아야 함. 변하면 이전 기록 말소됨.
    - 존재성: 주식별자가 지정되면 반드시 값이 들어와야 함

1. 식별자 분류
    - 대표성여부: 주식별자, 보조식별자
    - 스스로생성여부: 내부식별자, 외부식별자
    - 속성의 수: 단일식별자, 복합식별자
    - 대체 여부: 본질식별자(원조식별자), 인조식별자(대리 식별자)

1. 식별자 표기법

    ![](md-images/2021-11-16-14-41-23.png)

    ![](md-images/2021-11-16-14-41-34.png)

1. 기출
    - 42회
        1. 식별자 고르는 문제 (정답: 주식별자, 보조식별자, 외부식별자)  

### 🔷 식별자 관계, 비식별자 관계 <a id="aid-10">

[목차로 이동](#aid-index)

1. 식별, 비식별 특징 및 단점
    
    ![image](https://user-images.githubusercontent.com/70236767/141673370-a99e8faa-df53-41fe-9982-a77cf5be4989.png)
    
2. 기술 (IE vs Baker)
    
    ![image](https://user-images.githubusercontent.com/70236767/141673373-22ae1fed-d1fc-4be7-b0b7-91749c67a3d1.png)
    
3. ERD 서술 규칙
    1. 시선 좌상 → 우하
    2. 관계명 반드시 표기 안해도 된다.
    3. UML → 객체지향에서만 쓰인다.

### 🔷 성능 데이터 모델링 <a id="aid-11">

[목차로 이동](#aid-index)

1. 모델링 종류
    1. 아키텍처
        - 테이블, 파티션
        - 정규화, 반정규화
    2. SQL 명령문
        - 조인 수행 원리
        - optimizer
        - 실행계획

### 🔷 ⭐ 정규화 <a id="aid-12">

[목차로 이동](#aid-index)

1. 정규화 방법
    1. 1차: 원자성, 2차: 부분함수종속제거, 3차: 이행함수종속제거
2. 이상현상 정의와 예시
3. 성능
    - select는 성능 느려질수 있다. (join 때문에)
    - insert, update는 빨라질 수 있다. (테이블 작아져서)
4. 정규화 많이 보기

### 🔷 반정규화 <a id="aid-13">

[목차로 이동](#aid-index)

1. 데이터 무결성 해친다.
2. 반정규화 고려 순서
    1. 빈도수 조사 (대량범위, 범위처리, 통계처리)
    2. 응용시스템변경, 클러스터링/인덱스, 뷰 고려
    3. 위 방법으로 해결 안될 시 반정규화 고려
3. 반정규화 방법 및 기법
    1. 테이블 반정규화: 병합(1:1, 1:M, 슈퍼/서브), 분할(부분T, 통계T, 중복T)
    2. 속성 반정규화(파생, 오류, 이력컬럼, PK →속성, 중복속성)
    3. 관계 반정규화(중복관계추가)

### 🔷 대량 데이터에 따른 성능 <a id="aid-14">

[목차로 이동](#aid-index)

1. row migration, row chaining
    - 정의 읽어만 보기
2. 파티셔닝 (list, range, hash) 특징
    - range: 관리 쉽다, 가장많이 쓰인다
    - hash: 관리가 어렵다

### 🔷 슈퍼/서브타입 <a id="aid-15">

[목차로 이동](#aid-index)

   ![image](https://user-images.githubusercontent.com/70236767/141673448-0d2d9037-d0ca-4dcd-8cd4-93bba827c50f.png)


1. 용량
    1. 적은경우: one to one. 트랜잭션이 개별로
    2. 큰경우: 트랜잭션 유형으로
2. 트랜잭션
    1. 공통/차이. plus type
    2. 전체 통합. single type

### 🔷 분산데이터베이스 <a id="aid-16">

[목차로 이동](#aid-index)

1. 투명성 개념
    - 요즘 잘 안나온다.
2. 데이터 무결성 해친다.

### 🔷 ⭐ 조인 수행 원리 <a id="aid-17">

[목차로 이동](#aid-index)

1. 문제 많이 풀기
2. 종류
    1. NL: 랜덤엑세스, 대용량 소트 작업 유리
    2. sort merge: 조인키 기준 정렬, 등가 비등가
    3. hash: 등가 조인만 쓴다, 선행 table 작다, 해시 처리 위한 별도 공간 필요

### 🔷 옵티마이저 <a id="aid-18">

[목차로 이동](#aid-index)

1. CBO, RBO 정의 정도만 공부하기
    1. CBO: 경로
    2. RBO: 규칙
2. 요즘 잘 안나온다.

### 🔷 인덱스 <a id="aid-19">

[목차로 이동](#aid-index)

1. 인덱스 언제 사용
    1. 부정형, LIKE, 묵시적형변환일 때 안쓴다.
2. 인덱스 사용 시 다음 성능 저하
    1. insert, update, delete

### 🔷 실행계획 <a id="aid-20">

[목차로 이동](#aid-index)

1. ⭐ 실행 순서 딱 하나만 보기
    
    ![image](https://user-images.githubusercontent.com/70236767/141673401-d00a97fb-a335-4a23-9e1d-66a3d3931fbe.png)
    

### 🔷 pivot <a id="aid-21">

[목차로 이동](#aid-index)

[목차로 이동](#aid-index)

[메인으로 이동](../README.md)
