## SQLD ìµœì¢… ì •ë¦¬ 1í¸

- ê¹€ê°•ë¯¼ SQLD ê°•ì‚¬ ìµœì¢… ì •ë¦¬ê°•ì˜ ì˜ìƒ ë‚´ìš© ì •ë¦¬
- ì´ê²ƒë§Œ ë³´ë©´ ë¬´ì¡°ê±´ 60ì  ì´ìƒì€ ë„˜ëŠ”ëŒ€ìš”.
- ë§í¬
    - 1í¸: [https://youtu.be/PC3ypt_VGWI](https://youtu.be/PC3ypt_VGWI)
    - 2í¸: [https://youtu.be/PjCSvexo3Ow](https://youtu.be/PjCSvexo3Ow)
    

### ğŸ”· SQL ëª…ë ¹ë¬¸ ê°œê´„

1. from-where-group by-having-select-orderby
    - ìˆœì„œì•Œê¸°
2. ì¢…ë¥˜ì•Œê¸°
    - DML - select, insert, delete, update
    - DDL - alert, create, modify, drop, truncate ...
    - TCL - rollback, commit
    - DCL - grant, revoke

### ğŸ”· SELECT

1. distinct (ì§‘ì•½)
    - distinct deptno, mgr
        - ê´„í˜¸ê°€ ìƒëµë˜ì–´ìˆëŠ” ê±°ë‹¤. ì¦‰, distinct (deptno, mgr)
2. as
    - selectì— ì“°ëŠ” ê²½ìš°
        1. as ìƒëµ ê°€ëŠ¥
        2. ì»¬ëŸ¼ëª…ì— ë„ì–´ì“°ê¸° ìˆëŠ” ê²½ìš° 
            - "ì§ì› ë²ˆí˜¸"
    - fromì— ì“°ëŠ” ê²½ìš°
        - ì‚¬ìš©ë¶ˆê°€
3. concat
    - +: SQL server
    - ||: oracle
    - concat ì—°ì‚°ì ë¬´ì¡°ê±´ ì¸ìˆ˜ê°€ 2ê°œì´ë‹¤.

### ğŸ”· ë…¼ë¦¬ì—°ì‚°ì

1. and, or, not
2. â­ ì—°ì‚°ìˆœìœ„
    1. NOT
    2. AND
    3. OR

### ğŸ”· SQL ì—°ì‚°ì

1. A between 1 and 2
    - 1â‰¤Aâ‰¤2
2. A in (1, 2, 3)
    - A=1 or A=2  or A=3
3. â­ LIKE
    1. _: ë¯¸ì§€ì˜ í•œ ê¸€ì
    2. %: 0ì´ìƒ ê¸€ì
    3. escape: ì™€ì¼ë“œì¹´ë“œ( _ , %)ë¥¼ ë¬¸ìë¡œ ì·¨ê¸‰
        - ename like 'A@_A' escape '@'
            - @ê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë¬¸ìê°€ ë  ìˆ˜ë„ ìˆë‹¤.
4. rownumê³¼ top
    1. rownum (oracle)
        - where ì“´ë‹¤ë©´ ì¡°ê±´ì— rownum=1ì´ í¬í•¨ë˜ì–´ì•¼ í•œë‹¤.
            - `select e.*, rownum from emp e where rownum >=2 order by sal desc;`
                - ê²°ê³¼ ì•ˆë‚˜ì˜¨ë‹¤.
        - select empno, sal from emp where rownum <= 3 order by sal desc
            - ì •ë ¬ ì „ì„ ê¸°ì¤€ìœ¼ë¡œ rownumì´ ì‹¤í–‰ëœë‹¤ëŠ” ì  ìœ ì˜
            - order byê°€ ê°€ì¥ ë§ˆì§€ë§‰ì— ì‹¤í–‰ëœë‹¤.
            - `select * from emp e order by sal desc;`
                
                ![image](https://user-images.githubusercontent.com/70236767/141669306-4b8d77cb-c333-4f9a-baa0-09fcd3b241b0.png)
                
        - `select e.*, rownum from emp e where rownum <=3 order by sal desc;`
            
            ![image](https://user-images.githubusercontent.com/70236767/141669312-a4f376b0-e2ca-46e4-861e-89f581d959cb.png)
            
    2. top (SQL server)
        - (select) top (n) (ì»¬ëŸ¼ëª…)
            - ìƒìœ„ nê°œí–‰ ê°€ì ¸ì˜¨ë‹¤.

### ğŸ”· â­ NULL

1. nullì˜ ì •ì˜
    - ë¶€ì¬, ëª¨ë¥´ëŠ” ê°’
    - ì‚°ìˆ ì—°ì‚°: null + 2, null - 4, null * null
        - null
    - ë¹„êµì—°ì‚°: null = null, null = 2
        - ì•Œìˆ˜ì—†ìŒ(unknown)
        - where ì¡°ê±´ ì•ˆì— ë“¤ì–´ê°€ë©´ False
    - ì •ë ¬ ìƒ ì˜ë¯¸
        - oracle: ë¬´í•œëŒ€
        - SQL server: -ë¬´í•œëŒ€
2. í•¨ìˆ˜
    - nvl(ê°’1, ê°’2)
        - ê°’1ì´ nullì´ë¼ë©´ ê°’2, ì•„ë‹ˆë©´ ê°’1
    - nvl2(ê°’1, ê°’2, ê°’3)
        - ê°’1ì´ nullì´ë¼ë©´ ê°’3, ì•„ë‹ˆë©´ ê°’2
    - isNull(ê°’1, ê°’2)
        - nvlê³¼ ë™ì¼
    - null if(ê°’1, ê°’2)
        - ë‘ ê°’ì´ ê°™ìœ¼ë©´ null, ë‹¤ë¥´ë©´ ê°’1
    - coalesce(ê°’1, ê°’2, ...)
        - ê°’1ë¶€í„° ë´¤ì„ ë•Œ ë„ ì•„ë‹Œ ì²«ë²ˆì§¸ ê°’
    

### ğŸ”· ì •ë ¬

1. ì •ë ¬ì˜ íŠ¹ì„±
    - ê°€ì¥ ë§ˆì§€ë§‰ ì‹¤í–‰
    - ì„±ëŠ¥ì´ ëŠë ¤ì§ˆ ìˆ˜ ìˆë‹¤.
    - null ê°’ê³¼ì˜ ê´€ê³„(ì˜¤ë¼í´ì—ì„œëŠ” ë¬´í•œëŒ€, SQL Serverì—ì„œëŠ” -ë¬´í•œëŒ€)
2. ì»¬ëŸ¼ ë²ˆí˜¸ ì •ë ¬
    - ì¶œë ¥ë˜ëŠ” ì»¬ëŸ¼ì˜ ìˆ˜ë³´ë‹¤ í° ê°’ ë¶ˆí—ˆ
3. ì¸ìˆ˜ ë‘ê°œ ì •ë ¬
    - sal desc, ename asc
        - salì´ ê°’ìœ¼ë©´ ename ì˜¤ë¦„ì°¨ìˆœ
4. ì¶œë ¥ ì»¬ëŸ¼ ì•„ë‹Œ ì»¬ëŸ¼ìœ¼ë¡œ ì •ë ¬ ê°€ëŠ¥
    - `select ename ..... order by sal`: ê°€ëŠ¥

### ğŸ”· ìˆ«ì í•¨ìˆ˜

1. round ìë¦¿ìˆ˜
    - round(123.54) = 124
    - round(123.54, 0) = 124
    - round(123.54, 1) = 123.5
2. ceil(oracle) / ceiling(SQL Server)
    - ì˜¬ë¦¼
3. trunc(oracle) / floor(SQL Server)
    - ë‚´ë¦¼

### ğŸ”· ë¬¸ìì—´ í•¨ìˆ˜

1. upper, lower
2. lpad, rpad, ltrim, rtrim
3. substr, instr
    - ì‹¤ìŠµí•´ë³´ê¸°

### ğŸ”· ë‚ ì§œí•¨ìˆ˜

1. to_char, to_date
    - ì‹¤ìŠµí•´ë³´ê¸°
    - í˜•ë³€í™˜í•¨ìˆ˜
2. sysdate(oracle), getdate() (SQL Server)
3. ë‚ ì§œë°ì´í„° + 100
    - 100ì¼ ì´í›„

### ğŸ”· DECODE / CASE

1. ì£¼ë¡œ CASEë§Œ ë‚˜ì˜¨ë‹¤.
    - case when ~~ then ~~ when ~~ then ~~  else ~~ end
    - elseê°€ ì—†ì„ ë•Œ ì•ì˜ ì¡°ê±´ë“¤ ëª¨ë‘ ë§Œì¡±í•˜ì§€ ì•Šìœ¼ë©´ null ì¶œë ¥
2. DECODEëŠ” ì‹¤ìŠµë§Œ í•œë²„ ã„´í•´ë³´ê¸°

### ğŸ”· â­ ì§‘ê³„í•¨ìˆ˜

1. null ê³¼ì˜ ê´€ê³„
    
    ![image](https://user-images.githubusercontent.com/70236767/141669333-44c877d5-b65c-4188-acad-9a692827021e.png)
    
    - selectí•œ 3ê°œì˜ ë ˆì½”ë“œì— ëŒ€í•´ Aì»¬ëŸ¼ì— ê°’ì´ null, 3, nullì´ê³  Bì»¬ëŸ¼ì— ê°’ì´ null, 2, 2ë¼í•  ë•Œ
        - sum(A) = 3, sum(B) = 4, count(A) = 1, count(*) = 3
    - sum(A+B+C) (35íšŒê¸°ì¶œ)
        - 7
    - sum(A) + sum(B) + sum(C) = 3 + 4 + 6 = 13
    

### ğŸ”· GROUP BY

1. ì§‘ì•½ê¸°ëŠ¥
2. ê·¸ë£¹ìˆ˜ì¤€ìœ¼ë¡œ ì •ë³´ë¥¼ ë°”ê¾¼ë‹¤.

### ğŸ”· JOIN

1. natural join, using
    - ì¤‘ë³µëœ ì»¬ëŸ¼ í•˜ë‚˜ë¡œ
        - ì œì¼ ì•ì— ë“±ì¥
    - â­ usingì—ì„œ alias ì‚¬ìš© x (natural joinì€ ì‚¬ìš© ê°€ëŠ¥)
2. left outer join, A left outer join B
    - = A col1 = B col1(+)
3. ì¡°ì¸ìˆœì„œ

    ![image](https://user-images.githubusercontent.com/70236767/141669339-73551417-2435-486b-ae77-e2f676879c0b.png)

    - Aë‘ B ì¡°ì¸í•˜ê³  ê·¸ ì¡°ì¸í•œ ê±¸ Cì™€ ì¡°ì¸

### ğŸ”· ì„œë¸Œì¿¼ë¦¬

1. ì„œë¸Œì¿¼ë¦¬ ë“¤ì–´ê°€ëŠ” ê²½ìš°
    - select: scalar
    - from: inline view (ë©”ì¸ì¿¼ë¦¬ì˜ ì»¬ëŸ¼ ì‚¬ìš© ê°€ëŠ¥)
    - where: ê±°ì˜ ëª¨ë“  ì„œë¸Œì¿¼ë¦¬ ë‹¤ ë“¤ì–´ê°„ë‹¤. (ì¤‘ì²©ì„œë¸Œì¿¼ë¦¬)
    - group by: X
    - having: ê±°ì˜ ëª¨ë“  ì„œë¸Œì¿¼ë¦¬ (ì¤‘ì²©ì„œë¸Œì¿¼ë¦¬)
    - order by: scalar
2. select from A where (select from B where a.col = b.col)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669370-874c5100-a290-4b7f-bfbc-8e8bc7ab921b.png)
    
    - Aí…Œì´ë¸”ì—ì„œ í•˜ë‚˜ì˜ ë ˆì½”ë“œë§ˆë‹¤ B í…Œì´ë¸”ì„ ë‹¤ ëŒë ¤ë³¸ë‹¤.
        - ì´ ë•Œ Aì˜ col ê°’ì€ ê³ ì •ë˜ì–´ ìˆë‹¤.
3. in, any/some, all, exist
    - ê¸°ëŠ¥ ì•Œê¸°

### ğŸ”· ì§‘í•©ì—°ì‚°ì

1. ì§‘í•©ì—°ì‚°ì
    - union, intersect, minus (SQL Serverì—ì„œëŠ” except)
        - ì •ë ¬ì‘ì—… O, ëŠë¦¬ë‹¤
    - union all
        - ì¤‘ë³µë°ì´í„° O, ì •ë ¬ì‘ì—… x, ë¹ ë¥´ë‹¤

### ğŸ”· DDL

1. TCLê³¼ ì—°ê´€ì§€ì–´ ìƒê°í•˜ê¸°
2. ë¹„êµ
    - truncate vs drop
        - êµ¬ì¡°ëŠ” ë‚¨ìŒ vs êµ¬ì¡°ë„ ì‚­ì œ
    - truncate vs delete
        - DDL vs DML
        - rollback, commitê³¼ ì—°ê´€ë˜ì–´ ë‚˜ì˜¨ë‹¤.
        - ë¡¤ë°±ë¶ˆê°€ëŠ¥ vs ë¡¤ë°±ê°€ëŠ¥

### ğŸ”· DML

1. ìš”ì¦˜ ì•ˆë‚˜ì˜¤ëŠ” ì¶”ì„¸
2. insert, update, delete
    - TCL(commit, rollback)ê³¼ ì—°ê´€ì§€ì–´ ë‚˜ì˜¨ë‹¤.
3. merge
    - ì‹ ìœ í˜•(ê¸°ì¶œ 37íšŒ)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669377-080481f9-8d35-4095-8b22-cf67b80751cb.png)
    
    - [https://cafe.naver.com/sqlpd/20824](https://cafe.naver.com/sqlpd/20824)

### ğŸ”· â­ ì œì•½ì¡°ê±´

1. PK(=unique + not null), unique, not null 

### ğŸ”· DCL

1. grant, revoke
    - ì •ì˜
    - roleì˜ íŠ¹ì§• (ëª…ë ¹ì–´ê°€ ì•„ë‹Œ ê°ì²´[object]ì´ë‹¤.)
    - ë¬¸ë²• (on to êµ¬ë¬¸)
        - grant select on B to A (Aê³„ì •ì—ê²Œ Bí…Œì´ë¸”ì˜ seslect ê¶Œí•œ ì£¼ê¸°)

### ğŸ”· VIEW

1. VIEWì˜ íŠ¹ì§•
    - ë…ë¦½ì„±
    - í¸ë¦¬ì„±
    - ë³´ì•ˆì„±
2. í…Œì´ë¸”ì´ ì•„ë‹Œ sql ëª…ë ¹ë¬¸ì„ ì €ì¥í•˜ëŠ” ê²ƒìœ¼ë¡œ ìš©ëŸ‰ í•„ìš”í•˜ì§€ë§Œ í…Œì´ë¸”ë³´ë‹¤ëŠ” ëœ ì°¨ì§€

### ğŸ”· â­ ê·¸ë£¹í•¨ìˆ˜

1. ê·¸ë£¹í•¨ìˆ˜
    - roll up, cube, groping sets
        - rollup (A, B)ì™€ rollup (B, A)ëŠ” ë‹¤ë¥´ë‹¤.
        - cube (A, B)ì™€ cube (B, A)ëŠ” ê°™ë‹¤.
        - ë¹ˆì¹¸ ëš«ì–´ë†“ê³  ì–´ë–¤ í•¨ìˆ˜ì¸ì§€ ì°¾ì„ ë•Œ
            1. null ë‹¤ì°¾ê¸°
            2. ì´í•© í–‰ ì°¾ê¸°
                1. ì´í•© í–‰ ìˆìœ¼ë©´ roll up, cube
                    1. ì–‘ìª½ìœ¼ë¡œ ê²°ê³¼ê°€ ë‚˜ì˜¤ë©´ cube, í•œìª½ë§Œ ê³„ì¸µìœ¼ë¡œ ë‚˜ì˜¤ë©´ roll up
                2. ì´í•© í–‰ ì—†ìœ¼ë©´ grouping sets
    - grouping
        - ìš”ì¦˜ ì˜ ì•ˆë‚˜ì˜¨ë‹¤.

### ğŸ”· TCL

1. commit, rollback
2. auto commit off and begin transaction
    - DDLì— commit ê¸°ëŠ¥ ì—†ì•¤ ê²ƒ
    
    ![image](https://user-images.githubusercontent.com/70236767/141669391-e2105ca3-f019-4c0d-bed2-c97011891dd5.png)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669399-d258db47-43e5-44ac-929b-6b44203b92da.png)
    
    - [https://cafe.naver.com/sqlpd/11841](https://cafe.naver.com/sqlpd/11841)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669404-e04e21b7-dd37-4e21-91a1-0d8a89c9cad9.png)
    
    - [https://cafe.naver.com/sqlpd/22860](https://cafe.naver.com/sqlpd/22860)
    
<br><br>1í¸ ë
