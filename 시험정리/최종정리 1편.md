[메인으로 이동](../README.md)

## SQLD 최종 정리 1편

- 김강민 SQLD 강사 최종 정리강의 영상 정리 + 내용 추가 (개념, 기출 등)
- 김강민 강사 영상 링크
    - 1편: [https://youtu.be/PC3ypt_VGWI](https://youtu.be/PC3ypt_VGWI)
    - 2편: [https://youtu.be/PjCSvexo3Ow](https://youtu.be/PjCSvexo3Ow)
    
## 목차 <a id="aid-index">

1. [SQL 명령문 개괄](#aid-1)
1. [SELECT](#aid-2)
1. [논리연산자](#aid-3)
1. [SQL 연산자](#aid-4)
1. [⭐ NULL](#aid-5)
1. [정렬](#aid-6)
1. [숫자 함수](#aid-7)
1. [문자열 함수](#aid-8)
1. [날짜함수](#aid-9)
1. [DECODE / CASE](#aid-10)
1. [⭐ 집계함수](#aid-11)
1. [GROUP BY](#aid-12)
1. [JOIN](#aid-13)
1. [서브쿼리](#aid-14)
1. [집합연산자](#aid-15)
1. [DDL](#aid-16)
1. [DML](#aid-17)
1. [⭐ 제약조건](#aid-18)
1. [DCL](#aid-19)
1. [VIEW](#aid-20)
1. [⭐ 그룹함수](#aid-21)
1. [TCL](#aid-22)


## 1편


### 🔷 SQL 명령문 개괄 <a id="aid-1">

[목차로 이동](#aid-index)

1. SELECT 문장 실행 순서
    - from - where - group by - having - select - order by
    - 노랭이 72p 과목2 - 59번
    - 42회 기출

2. 종류알기
    - DML - select, insert, delete, update, merge, call, explain plan, lock table
    - DDL - alter, create, modify, drop, truncate, rename, comment
    - TCL - rollback, commit, savepoint, set transaction
    - DCL - grant, revoke
    - 42회 기출

### 🔷 SELECT <a id="aid-2">

[목차로 이동](#aid-index)

1. distinct (집약)
    - distinct deptno, mgr
        - 괄호가 생략되어있는 거다. 즉, distinct (deptno, mgr)
2. as
    - select에 쓰는 경우
        1. as 생략 가능
        2. 컬럼명에 띄어쓰기 있는 경우 
            - "직원 번호"
    - from에 쓰는 경우
        - 사용불가
3. concat
    - +: SQL server
    - ||: oracle
    - concat 연산자 무조건 인수가 2개이다.

### 🔷 논리연산자 <a id="aid-3">

[목차로 이동](#aid-index)

1. and, or, not
2. ⭐ 연산순위
    1. NOT
    2. AND
    3. OR

### 🔷 SQL 연산자 <a id="aid-4">

[목차로 이동](#aid-index)

1. A between 1 and 2
    - 1≤A≤2
2. A in (1, 2, 3)
    - A=1 or A=2  or A=3
3. ⭐ LIKE
    1. _: 미지의 한 글자
    2. %: 0이상 글자
    3. escape: 와일드카드( _ , %)를 문자로 취급
        - ename like 'A@_A' escape '@'
            - @가 아닌 다른 문자가 될 수도 있다.
4. rownum과 top
    1. rownum (oracle)
        - where 쓴다면 조건에 rownum=1이 포함되어야 한다.
            - `select e.*, rownum from emp e where rownum >=2 order by sal desc;`
                - 결과 안나온다.
        - select empno, sal from emp where rownum <= 3 order by sal desc
            - 정렬 전을 기준으로 rownum이 실행된다는 점 유의
            - order by가 가장 마지막에 실행된다.
            - `select * from emp e order by sal desc;`
                
                ![image](https://user-images.githubusercontent.com/70236767/141669306-4b8d77cb-c333-4f9a-baa0-09fcd3b241b0.png)
                
        - `select e.*, rownum from emp e where rownum <=3 order by sal desc;`
            
            ![image](https://user-images.githubusercontent.com/70236767/141669312-a4f376b0-e2ca-46e4-861e-89f581d959cb.png)
            
    2. top (SQL server)
        - (select) top (n) (컬럼명)
            - 상위 n개행 가져온다.



### 🔷 ⭐ NULL <a id="aid-5">

[목차로 이동](#aid-index)

1. null의 정의
    - 부재, 모르는 값
    - 산술연산: null + 2, null - 4, null * null
        - null
    - 비교연산: null = null, null = 2
        - 알수없음(unknown)
        - where 조건 안에 들어가면 False
    - 정렬 상 의미
        - oracle: 무한대
        - SQL server: -무한대
2. 함수
    - nvl(값1, 값2)
        - 값1이 null이라면 값2, 아니면 값1
    - nvl2(값1, 값2, 값3)
        - 값1이 null이라면 값3, 아니면 값2
    - isNull(값1, 값2)
        - nvl과 동일
    - null if(값1, 값2)
        - 두 값이 같으면 null, 다르면 값1
    - coalesce(값1, 값2, ...)
        - 값1부터 봤을 때 널 아닌 첫번째 값
    

### 🔷 정렬 <a id="aid-6">

[목차로 이동](#aid-index)

1. 정렬의 특성
    - 가장 마지막 실행
    - 성능이 느려질 수 있다.
    - null 값과의 관계(오라클에서는 무한대, SQL Server에서는 -무한대)
2. 컬럼 번호 정렬
    - 출력되는 컬럼의 수보다 큰 값 불허
3. 인수 두개 정렬
    - sal desc, ename asc
        - sal이 값으면 ename 오름차순
4. 출력 컬럼 아닌 컬럼으로 정렬 가능
    - `select ename ..... order by sal`: 가능

### 🔷 숫자 함수 <a id="aid-7">

[목차로 이동](#aid-index)

1. round 자릿수
    - round(123.54) = 124
    - round(123.54, 0) = 124
    - round(123.54, 1) = 123.5
2. ceil(oracle) / ceiling(SQL Server)
    - 올림
3. trunc(oracle) / floor(SQL Server)
    - 내림

### 🔷 문자열 함수 <a id="aid-8">

[목차로 이동](#aid-index)

1. upper, lower
2. lpad, rpad, ltrim, rtrim
3. substr, instr
    - 실습해보기

### 🔷 날짜함수 <a id="aid-9">

[목차로 이동](#aid-index)

1. to_char, to_date
    - 실습해보기
    - 형변환함수
2. sysdate(oracle), getdate() (SQL Server)
3. 날짜데이터 + 100
    - 100일 이후

### 🔷 DECODE / CASE <a id="aid-10">

[목차로 이동](#aid-index)

1. 주로 CASE만 나온다.
    - case when ~~ then ~~ when ~~ then ~~  else ~~ end
    - else가 없을 때 앞의 조건들 모두 만족하지 않으면 null 출력
2. DECODE는 실습만 한버 ㄴ해보기

### 🔷 ⭐ 집계함수 <a id="aid-11">

[목차로 이동](#aid-index)

1. null 과의 관계
    
    ![image](https://user-images.githubusercontent.com/70236767/141669333-44c877d5-b65c-4188-acad-9a692827021e.png)
    
    - select한 3개의 레코드에 대해 A컬럼에 값이 null, 3, null이고 B컬럼에 값이 null, 2, 2라할 때
        - sum(A) = 3, sum(B) = 4, count(A) = 1, count(*) = 3
    - sum(A+B+C) (35회기출)
        - 7
    - sum(A) + sum(B) + sum(C) = 3 + 4 + 6 = 13
    

### 🔷 GROUP BY <a id="aid-12">

[목차로 이동](#aid-index)

1. 집약기능
2. 그룹수준으로 정보를 바꾼다.

### 🔷 JOIN <a id="aid-13">

[목차로 이동](#aid-index)

1. natural join, using
    - 중복된 컬럼 하나로
        - 제일 앞에 등장
    - ⭐ using에서 alias 사용 x (natural join은 사용 가능)
2. left outer join, A left outer join B
    - = A col1 = B col1(+)
3. 조인순서

    ![image](https://user-images.githubusercontent.com/70236767/141669339-73551417-2435-486b-ae77-e2f676879c0b.png)

    - A랑 B 조인하고 그 조인한 걸 C와 조인

### 🔷 서브쿼리 <a id="aid-14">

[목차로 이동](#aid-index)

1. 서브쿼리 들어가는 경우
    - select: scalar
    - from: inline view (메인쿼리의 컬럼 사용 가능)
    - where: 거의 모든 서브쿼리 다 들어간다. (중첩서브쿼리)
    - group by: X
    - having: 거의 모든 서브쿼리 (중첩서브쿼리)
    - order by: scalar
2. select from A where (select from B where a.col = b.col)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669370-874c5100-a290-4b7f-bfbc-8e8bc7ab921b.png)
    
    - A테이블에서 하나의 레코드마다 B 테이블을 다 돌려본다.
        - 이 때 A의 col 값은 고정되어 있다.
3. in, any/some, all, exist
    - 기능 알기

### 🔷 집합연산자 <a id="aid-15">

[목차로 이동](#aid-index)

1. 집합연산자
    - union, intersect, minus (SQL Server에서는 except)
        - 정렬작업 O, 느리다
    - union all
        - 중복데이터 O, 정렬작업 x, 빠르다

### 🔷 DDL <a id="aid-16">

[목차로 이동](#aid-index)

1. TCL과 연관지어 생각하기
2. 비교
    - truncate vs drop
        - 구조는 남음 vs 구조도 삭제
    - truncate vs delete
        - DDL vs DML
        - rollback, commit과 연관되어 나온다.
        - 롤백불가능 vs 롤백가능

### 🔷 DML <a id="aid-17">

[목차로 이동](#aid-index)

1. 요즘 안나오는 추세
2. insert, update, delete
    - TCL(commit, rollback)과 연관지어 나온다.
3. merge
    - 신유형(기출 37회)
    - merge 한번 보기
    
    ![image](https://user-images.githubusercontent.com/70236767/141669377-080481f9-8d35-4095-8b22-cf67b80751cb.png)
    
    - [https://cafe.naver.com/sqlpd/20824](https://cafe.naver.com/sqlpd/20824)

### 🔷 ⭐ 제약조건 <a id="aid-18">

[목차로 이동](#aid-index)

1. PK(=unique + not null), unique, not null 

### 🔷 DCL <a id="aid-19">

[목차로 이동](#aid-index)

1. grant, revoke
    - 정의
    - role의 특징 (명령어가 아닌 객체[object]이다.)
    - 문법 (on to 구문)
        - grant select on B to A (A계정에게 B테이블의 seslect 권한 주기)

### 🔷 VIEW <a id="aid-20">

[목차로 이동](#aid-index)

1. VIEW의 특징
    - 독립성
    - 편리성
    - 보안성
2. 테이블이 아닌 sql 명령문을 저장하는 것으로 용량 필요하지만 테이블보다는 덜 차지

### 🔷 ⭐ 그룹함수 <a id="aid-21">

[목차로 이동](#aid-index)

1. 그룹함수
    - roll up, cube, groping sets
        - rollup (A, B)와 rollup (B, A)는 다르다.
        - cube (A, B)와 cube (B, A)는 같다.
        - 빈칸 뚫어놓고 어떤 함수인지 찾을 때
            1. null 다찾기
            2. 총합 행 찾기
                1. 총합 행 있으면 roll up, cube
                    1. 양쪽으로 결과가 나오면 cube, 한쪽만 계층으로 나오면 roll up
                2. 총합 행 없으면 grouping sets
    - grouping
        - 요즘 잘 안나온다.

### 🔷 TCL <a id="aid-22">

[목차로 이동](#aid-index)

1. commit, rollback
2. auto commit off and begin transaction
    - DDL에 commit 기능 없앤 것
    
    ![image](https://user-images.githubusercontent.com/70236767/141669391-e2105ca3-f019-4c0d-bed2-c97011891dd5.png)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669399-d258db47-43e5-44ac-929b-6b44203b92da.png)
    
    - [https://cafe.naver.com/sqlpd/11841](https://cafe.naver.com/sqlpd/11841)
    
    ![image](https://user-images.githubusercontent.com/70236767/141669404-e04e21b7-dd37-4e21-91a1-0d8a89c9cad9.png)
    
    - [https://cafe.naver.com/sqlpd/22860](https://cafe.naver.com/sqlpd/22860)
    
[목차로 이동](#aid-index)

[메인으로 이동](../README.md)
